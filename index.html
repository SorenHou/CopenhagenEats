<!DOCTYPE html>
<html>
  <head>
    <title>Copenhagen Eats</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Oswald&display=swap" />
<style>
  /* Add the font-family property to your header and pane */
  header,
  #locations-pane {
    font-family: 'Oswald', sans-serif;
    box-sizing: border-box; /* Include padding and border within the element's dimensions */
  }

  #map {
    width: 80%;
    height: 100%;
  }
  html,
  body {
    height: 100%;
    margin: 0;
    padding: 0;
    background-color: #f1f1f1;
  }
  header {
    text-align: center;
    padding: 5px;
    background-color: #f1f1f1;
    height: 20%; /* Adjust the header height */
  }
  /* Add any other CSS properties you want for your pane */
  #locations-pane {
    font-size: 16px;
  }

  .main-container {
    display: flex;
    height: 80%; /* Set the height of the main container */
  }

  #map {
    width: 80%;
    height: 100%;
  }

  #locations-pane {
    width: 20%;
    height: 100%;
    overflow-y: auto;
    padding: 10px;
  }
  
  /* Increase the font size of the header text and reduce line-height */
  header h1 {
    font-size: 100px;
    line-height: 0.8; /* Adjust the line-height to control the space around the header text */
    margin-top: 0; /* Remove space above the header h1 */
  }
  
  header p {
    font-size: 18px;
    line-height: 1.2; /* Adjust the line-height for the description text */
    margin-top: 0; /* Remove space above the header p */
  }
  
</style>


</head>
  <body>
    <header>
      <h1>Copenhagen Eats</h1>
      <p>Discover great places to eat in Copenhagen</p>
    </header>

    <div class="main-container">
      <div id="map"></div>
      <div id="locations-pane"></div>
    </div>

    <script>
        function initMap() {
        const map = new google.maps.Map(document.getElementById('map'), {
          zoom: 12,
          center: { lat: 55.6761, lng: 12.5683 }, // Center the map on Copenhagen
        });

        // Create a KML layer to display the polygon and add it to the map
        const kmlLayer = new google.maps.KmlLayer({
          url: 'https://raw.githubusercontent.com/SorenHou/CopenhagenEats/main/MapFile.kml',
          map: map,
          preserveViewport: true,
        });

        // Create an object to hold icon URLs for each category
        const icons = {
          'Red': 'https://raw.githubusercontent.com/SorenHou/CopenhagenEats/main/red-dot.png',
          'Yellow': 'https://raw.githubusercontent.com/SorenHou/CopenhagenEats/main/yellow-dot.png',
          'Blue': 'https://raw.githubusercontent.com/SorenHou/CopenhagenEats/main/blue-dot.png',
        };

        // Create a marker for each location and add it to the map
        const markerBounds = new google.maps.LatLngBounds();
        data.features.forEach((feature) => {
          const locationCoords = {
            lat: feature.geometry.coordinates[1],
            lng: feature.geometry.coordinates[0],
          };
          const icon = icons[feature.properties.category];
          const marker = new google.maps.Marker({
            position: locationCoords,
            map: map,
            title: feature.properties.name,
            icon: icon,
          });
          const infowindow = new google.maps.InfoWindow({
            content: `<h3>${feature.properties.name}</h3><p>${feature.properties.description}</p>`,
          });
          marker.addListener('click', () => {
            infowindow.open(map, marker);
          });
          markerBounds.extend(locationCoords);
        });
        map.fitBounds(markerBounds);
      }

      
        async function fetchLocationData() {
          const response = await fetch('https://raw.githubusercontent.com/SorenHou/CopenhagenEats/main/MapFileJSON.json');
          const data = await response.json();
          const locationsPane = document.getElementById('locations-pane');

          const map = new google.maps.Map(document.getElementById('map'), {
            zoom: 12,
            center: { lat: 55.6761, lng: 12.5683 },
          });

          data.features.forEach((feature) => {
            const locationDiv = document.createElement('div');
            locationDiv.classList.add('location');

            const locationName = document.createElement('h3');
            locationName.textContent = feature.properties.name;
            locationDiv.appendChild(locationName);

            const locationDescription = document.createElement('p');
            locationDescription.textContent = feature.properties.description;
            locationDiv.appendChild(locationDescription);

            // Add click event listener to each location's div
            locationDiv.addEventListener('click', () => {
              // Get the location's coordinates from the feature's geometry
              const locationCoords = {
                lat: feature.geometry.coordinates[1],
                lng: feature.geometry.coordinates[0],
              };
              // Update the map's center and zoom level to focus on the clicked location
              map.setCenter(locationCoords);
              map.setZoom(16);
            });

            locationsPane.appendChild(locationDiv);

            // Add marker to the map
            const marker = new google.maps.Marker({
              position: {
                lat: feature.geometry.coordinates[1],
                lng: feature.geometry.coordinates[0],
              },
              map: map,
              title: feature.properties.name,
            });
          });
        }

      // Fetch location data when the page loads
      window.addEventListener('load', fetchLocationData);

      // Load the Google Maps API script
      
    </script>
    <script
      async
      defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDTV1aLFYT4vIK6FhFJnqRflsrtRGpbd1I&callback=initMap"
    ></script>
  </body>
</html>
